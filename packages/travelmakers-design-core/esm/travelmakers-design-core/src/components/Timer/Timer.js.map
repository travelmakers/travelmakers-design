{"version":3,"file":"Timer.js","sources":["../../../../../src/components/Timer/Timer.tsx"],"sourcesContent":["import { ClassNames, TmComponentProps } from \"@travelmakers-design/styles\";\nimport React, { forwardRef, useState, useEffect } from \"react\";\n\nimport useStyles from \"./Timer.style\";\nimport { View } from \"../View\";\nimport { Image } from \"../Image\";\n\nexport type TimerStylesNames = ClassNames<typeof useStyles>;\n\nexport type TimerSize = \"small\" | \"large\";\n\nexport type TimerColor = \"navy\" | \"white\";\n\nexport interface TimerProps extends TmComponentProps<TimerStylesNames> {\n  /** Timer 컴포넌트의 크기를 정합니다. */\n  size?: TimerSize;\n\n  /** Timer 컴포넌트의 색상을 정합니다. */\n  color?: TimerColor;\n\n  /** Timer 컴포넌트의 설명을 정합니다. */\n  label?: string;\n\n  /** Timer 컴포넌트의 타이머가 끝나는 시간을 정합니다. */\n  endAt?: Date;\n}\n\nconst INTERVAL_TIME = 1000;\nconst TIMER_FORMAT = \"D일 HH : mm : ss\"; //TODO: 국가에 따라 날짜 포멧 다르게 지정하도록 하는 로직 추가\n\nexport const Timer = forwardRef<HTMLDivElement, TimerProps>(\n  (\n    {\n      size = \"small\",\n      color = \"navy\",\n      label = \"타임세일 워딩\",\n      endAt = new Date(),\n      className,\n      co,\n      overrideStyles,\n      ...props\n    },\n    ref\n  ) => {\n    const { classes, cx } = useStyles(\n      { size, color },\n      { overrideStyles, name: \"span\" }\n    );\n    const [timeLeft, setTimeLeft] = useState<any>(null);\n\n    const getTimeFormat = () => {\n      if (!endAt || !timeLeft) return \"\";\n      return TIMER_FORMAT.replace(\"D\", timeLeft.days)\n        .replace(\"HH\", timeLeft.hours)\n        .replace(\"mm\", timeLeft.minutes)\n        .replace(\"ss\", timeLeft.seconds);\n    };\n\n    const calculateTimeLeft = () => {\n      const difference = new Date(endAt).getTime() - new Date().getTime();\n\n      let timeLeft = {};\n\n      if (difference > 0) {\n        timeLeft = {\n          days: Math.floor(difference / (1000 * 60 * 60 * 24)).toString(),\n          hours: Math.floor((difference / (1000 * 60 * 60)) % 24)\n            .toString()\n            .padStart(2, \"0\"),\n          minutes: Math.floor((difference / 1000 / 60) % 60)\n            .toString()\n            .padStart(2, \"0\"),\n          seconds: Math.floor((difference / 1000) % 60)\n            .toString()\n            .padStart(2, \"0\"),\n        };\n      }\n      setTimeLeft(timeLeft);\n    };\n\n    useEffect(() => {\n      const interval = setInterval(() => {\n        calculateTimeLeft();\n      }, INTERVAL_TIME);\n      return () => clearInterval(interval);\n    }, [timeLeft]);\n\n    return (\n      <View\n        ref={ref}\n        className={cx(classes.container, className)}\n        co={co}\n        {...props}\n      >\n        <div className={cx(classes.labelContainer)}>\n          <Image\n            src={\n              color === \"navy\"\n                ? require(\"../../assets/svg/ic-timesale-navy.svg\")\n                : require(\"../../assets/svg/ic-timesale-white.svg\")\n            }\n            className={cx(classes.icon)}\n            alt=\"timer\"\n          />\n          <div className={cx(classes.label)}>{label}</div>\n        </div>\n        <div className={cx(classes.timer)}>{getTimeFormat()}</div>\n      </View>\n    );\n  }\n);\n\nTimer.displayName = \"@travelmakers-design/core/Timer\";\n"],"names":[],"mappings":"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"}